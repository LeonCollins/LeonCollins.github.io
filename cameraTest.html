<script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
<script src="main.js"></script>

<script>
	var url_string = window.location.href;
	var url = new URL(url_string);

	var height = [[url.searchParams.get("one"), url.searchParams.get("two"), url.searchParams.get("three")], [url.searchParams.get("four"), url.searchParams.get("five"), url.searchParams.get("six")], [url.searchParams.get("seven"), url.searchParams.get("eight"), url.searchParams.get("nine")]];


	AFRAME.registerComponent('terr', {
		init: function() {
			var el = this.el;
			for (var i = 0; i < 3; i++) {
				for (var j = 0; j < 3; j++) {
					for (var k = 0; k < height[i][j]; k++) {
						var boxEl = document.createElement('a-entity');
						boxEl.setAttribute('geometry', {primitive: 'box'});
						boxEl.setAttribute('material', {color: 'black'});
			            boxEl.setAttribute('scale', {x: 1, y: 1, z: 1});
			            boxEl.setAttribute('position', {x: i, y: k, z: j});
			            el.appendChild(boxEl);
		        	}
	        	}
			}
		}
	});
</script>

<body style='margin : 0px; overflow: hidden;'>
	<button id="menu" onclick="openOverlay()">Settings</button>
	<div id="overlay">
		<input type="number" id="height" value="1">
		<button onclick="setHeight()">Set Height</button>
		<button onclick="closeOverlay()">Return</button>
	</div>

	<a-scene embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>

		<a-marker terr type="barcode" value="1">
			
		</a-marker>

		<a-marker type="barcode" value="2">
			<a-box id="POne" position='0 0 0' height='1' width='1' depth ='1' material='color: red;'></a-box>
		</a-marker>

		<a-marker type="barcode" value="3">
			<a-box position='0 0 0' height='1' width='1' depth ='1' material='color: blue;'></a-box>
		</a-marker>

		<a-marker type="barcode" value="4">
			<a-box position='0 0 0' height='1' width='1' depth ='1' material='color: green;'></a-box>
		</a-marker>

		<a-marker type="barcode" value="5">
			<a-box position='0 0 0' height='1' width='1' depth ='1' material='color: yellow;'></a-box>
		</a-marker>

		<a-marker type="barcode" value="6">
			<a-box position='0 0 0' height='1' width='1' depth ='1' material='color: brown;'></a-box>
		</a-marker>

		<a-entity camera></a-entity>
	</a-scene>
</body>